<!-- <div class="container d-flex justify-content-center" style="margin-top: 150px;" > -->

    <!-- <div class="w-50" style="background-color: blue; border-radius: 0.6rem; padding: 0.5rem;" 
    *ngIf="product$ | async as product">

        <div class="d-flex  flex-column">
            <span class="d-flex justify-content-end">
                <button class="close btn-close" type="button" data-dismiss="container"></button>
            </span>

            <div class="mt-3 mb-2 rating">
                <p class="fs-3 fw-bold mb-2" 
                style="color: rgba(233, 172, 16, 0.978);">{{product.ratingsAverage + '/5' }}</p>
                <p class="mb-0">{{product.ratingsQuantity + ' verified ratings' }}</p>
            </div>
    
            <div class="col-md-12" style="border-bottom: 1px solid black; width: 100%;" *ngIf="product" >

                <!-- <div *ngFor="let key of Object.keys(product.reviewStat)">
                    {{ key }}: {{ myObject[key] }}
                  </div> --
                  


                <div class="col-md-12 rating-bar">
                    <p class="col-md-1 mb-0">1</p>
                    <p class="col-md-1 star">&#9733;</p>
                    <div class="progress w-100" style="height: 0.8rem;">
                        <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                    </div>
                    <p class="col-md-1 mb-0" style="margin-left: 10px;">3</p>
                </div>
                <div class="col-md-12 rating-bar">
                    <p class="col-md-1 mb-0">1</p>
                    <p class="col-md-1 star">&#9733;</p>
                    <div class="progress w-100" style="height: 0.8rem;">
                        <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                    </div>
                    <p class="col-md-1 mb-0" style="margin-left: 10px;">3</p>
                </div>
                <div class="col-md-12 rating-bar">
                    <p class="col-md-1 mb-0">3</p>
                    <p class="col-md-1 star">&#9733;</p>
                    <div class="progress w-100" style="height: 0.8rem;">
                        <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                    </div>
                    <p class="col-md-1 mb-0" style="margin-left: 10px;">7</p>
                </div>
               
                
            </div>

            <div class="col-md-12 mt-3">
                <div class="content">
                    <div class="d-flex justify-content-between fw-bold">
                        <span>Azumara Joseph</span>
                        <span>14th May, 2024</span>
                    </div>
                    <app-star></app-star>
                    <p class="mb-0">I likey</p>
                </div>
                <div class="content">
                    <div class="d-flex justify-content-between fw-bold">
                        <span>Stephen Azumara</span>
                        <span>19th May, 2024</span>
                    </div>
                    <app-star></app-star>
                    <p class="mb-0">I likey</p>
                </div>
                <div class="content">
                    <div class="d-flex justify-content-between fw-bold">
                        <span>Azumara Favor</span>
                        <span>7th January, 2024</span>
                    </div>
                    <app-star></app-star>
                    <p class="mb-0">I likey</p>
                </div>
            </div>
            
        </div>

        
    </div> -->
<!-- </div> -->



<!-- Modal -->
<!-- <div *ngIf="selectProduct$ | async as product; let i = index"> -->
<div class="modal fade" 
    [id]="'colorModal' + indexer"
    tabindex="-1"
    aria-labelledby="colorModalLabel"
    aria-hidden="true">

    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content"  *ngIf="product">
            <div class="modal-header">
                <h1 class="modal-title fs-4 fw-bold" style="margin-left: 45%;"
                    id="colorModalLabel">
                    Product Options
                </h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="modal-body p-2"
                *ngIf="product.color && product.color.length > 0" >                    
                <div class="card-header p-0" style="background-color: rgba(255, 255, 255, 0.993)">
                    <h3 class="card-text fs-4 p-2 ps-3">{{ product.name }}</h3>
                    <div class="d-flex justify-content-center p-2" >
                        <img [src]="'/assets/img-details/800x800_' + product.color[indexer].colorImage " class="img-fluid" alt="Product Detail Image">
                    </div>
                </div>

                <div class="price ps-4 pt-2 pb-2">
                    <p class="card-text fw-bold mb-1 mt-2" 
                        style="font-size: 1.3rem;">
                        {{product.color[indexer].discountPrice | currency: "USD": "symbol": "1.2-2" }}
                    </p>

                    <p class="mt-2 mb-1" 
                    [style.color]="getColors(product.color[indexer].quantity)" style="font-size: 0.8rem;" 
                    *ngIf="product.color[indexer].quantity">

                        {{product.color[indexer].quantity <= 80 ? product.color[indexer].quantity + " Units Left" : 
                        product.color[indexer].quantity > 80 && product.color[indexer].quantity <= 100 ? "Few Units Left" : 
                        product.color[indexer].quantity > 100 && product.color[indexer].quantity <= 200 ? "In Stock" : 
                        product.color[indexer].quantity > 200 ? "In Stock" : ""}}
                    </p>
                </div>

                <hr class="my-0">

                <div class="colors ms-4 me-4 pt-2 pb-2">
                    <div class="d-flex align-items-center mb-2">
                        <p class="card-text mb-0 fw-semibold fs-4">Colors: </p>
                        <span class="fw-semibold ms-3" >{{product.color ? product.color[indexer].color: '' }}</span>
                    </div>

                    <div class="col-md-12"
                        style="background-color: rgba(218, 216, 216, 0.993); display: flex; padding: 1rem;">
                        <div class="me-2"
                            *ngFor="let color of product.color; let i = index"
                            data-bs-toggle="modal"
                            [attr.data-bs-target]="'#colorModal' + i"
                            [class.selected]="i === indexer">
                            <img (click)="showToast('Color ' + color.color + ' clicked')
                            " Style="border: 1px solid black; cursor: pointer;" [src]="'/assets/img-details/75x75_' + color.colorImage" class="img-fluid p-2" alt="{{color.color}}">
                        </div>
                    </div>
                </div>

                <form autocomplete="off" novalidate #cartForm="ngForm" (ngSubmit)="save(cartForm)">

                    <div class="options ms-4 me-4 p-3" style="border-bottom: 2px solid rgba(0, 0, 0, 0.977);">
                        <span class=" card-text fw-semibold" style="font-size: 1.1rem;" >Quantity: </span>
                        <span>({{ (product.color[indexer].quantity - product.sold) }}) Available</span>
                        <br>
                        <div class="mt-2 mb-4">
                            <span class="card-text me-2 fw-semibold" style="font-size: 1.1rem;">Sold: </span>
                            <span>{{ product.sold }}</span>
                        </div>                         

                        <div class="d-flex align-items-center" style="height: 2.8rem">
                            <button [disabled]="quantity === 1" type="button" class="button btn"
                                (click)="decrement()" >
                                <span class="material-icons icon-size">
                                    remove
                                </span>
                            </button>

                            <p class="number" >{{quantity}}</p>

                            <button [disabled]="quantity === product.color[indexer].quantity" type="button" class="button btn"
                                (click)="increment(product.color[indexer].quantity)">
                                <span class="material-icons icon-size">
                                    add
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <input type="text" hidden class="form-control" id="idId" [(ngModel)]="product.id" name="id">

                    <input type="text" hidden class="form-control" id="quantityId" [(ngModel)]="quantity" name="quantity">
                    
                    <input type="text" hidden class="form-control" id="colorId" [(ngModel)]="product.color[indexer].color" name="color">


                    <div class="footer-btn d-flex justify-content-between mt-3 ms-4 me-4">
                        <div class="d-flex align-items-center">
                            <span class="card-text mb-0 fw-semibold fs-5">Total Price: </span>
                            <span class="card-text mb-0 fw-bold fs-3 ms-3">{{ quantity * product.color[indexer].discountPrice | currency: "USD": "symbol": "1.2-2" }}</span>
                        </div>
                        
                        <div class="col-md-1 p-0 flex-center"
                        style="border-radius: 0.8px; align-self: end;"  >
                        <button type="button"                                 
                            class="btn navigateTo" 
                            [disabled]="!cartForm.valid" 
                            type="submit" >Add to Cart</button>
                        <!-- data-bs-dismiss="modal" data-bs-dismiss="modal" [routerLink]="['/cart']"-->
                        </div>
                    </div>
                </form>


            
            </div>
            
        </div>
            
    </div>
</div>

<div class="alert alert-danger" *ngIf="errorMessage$ | async as errorMessage">
    {{errorMessage}}
</div>