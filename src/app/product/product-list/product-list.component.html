<div class="fluid-container ps-3 pe-3" style="background-color: rgba(247, 247, 247, 0.982)">
    <div class="col-md-12 slider ">
        <div id="carouselid" class="carousel slide" data-ride="carousel" data-pause="false">
          <div class="carousel-indicators ">
              <button type="button" data-target="#carouselid" data-slide-to="0" class="active indicators" ></button>
              <button type="button" data-target="#carouselid" data-slide-to="1" class="indicators"></button>
              <button type="button" data-target="#carouselid" data-slide-to="2" class="indicators"></button>
              <button type="button" data-target="#carouselid" data-slide-to="3" class="indicators"></button>
              <button type="button" data-target="#carouselid" data-slide-to="4" class="indicators"></button>
          </div>
          <div class="carousel-inner">
            <div class="carousel-item active" > 
                <img src="../../assets/img/slide_1.jpg" class="img-fluid" alt="Slide Logo">
            </div>
            <div class="carousel-item">
                <img src="../../assets/img/slide_2.jpg" class="img-fluid" alt="Slide Logo">
            </div>
            <div class="carousel-item">
                <img src="../../assets/img/slide_3.jpg" class="img-fluid" alt="Slide Logo">
            </div>
            <div class="carousel-item">
                <img src="../../assets/img/slide_4.jpg" class="img-fluid" alt="Slide Logo">
            </div>
            <div class="carousel-item">
                <img src="../../assets/img/slide_5.jpg" class="img-fluid" alt="Slide Logo">
            </div>
          </div>   
        </div>
    </div>

    <div class="col-md-6 ms-4 ps-4">
        <h3>{{pageTitle}}</h3>
    </div>
    
    <div class="col-md-12 mt-4">
        <div class="row ms-5 pb-3" *ngIf="products$">
            <div class="card p-2 m-2" style="width: 16rem;"
                *ngFor="let product of products$ | async">
                    
                <div class="card-body d-flex flex-column justify-content-between p-3" 
                
                [routerLink]="['/products', product.id]">
                    <img [src]="'/assets/products/250x250_' + product.imageCover"
                    class="card-img-top p-0"
                    alt="Products Image">

                    <div>
                        <p class="card-title fw-semibold mb-0" style="font-size: 14px;">{{product.name}}
                        </p>
                        <p class="card-text mb-0 fw-bold">{{product.discountedHighPrice | currency: 'USD': 'symbol': '1.2-2'}}
                            <ng-container *ngIf="product.discountedHighPrice !== product.discountedLowPrice">
                                - {{product.discountedLowPrice  | currency: 'USD': 'symbol': '1.2-2'}}
                            </ng-container>
                        </p>
                        <div>
                            <app-star></app-star>
                        </div>
                        <div class="d-flex justify-content-between mt-2">
                            <span *ngIf="product.discountedLowPrice && product.priceDiscountPercent"
                                style="font-size: 13px;">
                                    {{ (product.discountedLowPrice * product.priceDiscountPercent / 100) | currency: 'USD': 'symbol': '1.2-2' }}
                                
                                    <ng-container  *ngIf="product.discountedHighPrice !== product.discountedLowPrice">
                                    
                                    <span *ngIf="product.discountedHighPrice && product.priceDiscountPercent">
                                        - {{ (product.discountedHighPrice * product.priceDiscountPercent / 100)  | currency: 'USD': 'symbol': '1.2-2' }}
                                    </span>
                                </ng-container>
                            </span>
    
                            <span style="font-size: 13px; color: rgba(238, 7, 7, 0.988);"
                                    *ngIf="product.priceDiscountPercent">
                                {{product.priceDiscountPercent}}% off
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 btn-hover">
                    <button class="cart-btn mt-2 btn   p-2 justify-content-center" title="Add item to cart">Add to Cart</button>
                </div>               
            </div>

        </div>
    </div>
</div>

<div class="alert alert-danger" *ngIf="errorMessage$ | async as errorMessage">
    {{errorMessage}}
</div>
<!-- 
This part of the code is responsible for determining the scroll direction based on the comparison between the current scroll position (currentScroll) and the last known scroll position (this.lastScrollTop).

Variables Initialization:
isScrolledDown: boolean = false;: This variable is used to track whether the page is currently scrolled down (true) or not (false). Initially, it is set to false assuming that the page is not scrolled down initially.
lastScrollTop: number = 0;: This variable is used to store the last known scroll position of the page. Initially, it is set to 0 indicating that the page is at the top.
HostListener and onWindowScroll Method:
@HostListener('window:scroll', []): This decorator is used to listen for the scroll event on the window.
onWindowScroll(): This method is executed whenever a scroll event is detected on the window.
Detecting Scroll Direction:
let currentScroll = window.pageYOffset || document.documentElement.scrollTop;: This line calculates the current scroll position of the page. It checks window.pageYOffset first, and if it's not available (for older browsers), it falls back to document.documentElement.scrollTop.
if (currentScroll > this.lastScrollTop) { this.isScrolledDown = true; } else { this.isScrolledDown = false; }: This condition compares the current scroll position (currentScroll) with the last known scroll position (this.lastScrollTop). If the current scroll position is greater than the last known scroll position, it means the page is scrolled down, so isScrolledDown is set to true. Otherwise, it means the page is scrolled up, so isScrolledDown is set to false.
this.lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;: This line updates the lastScrollTop variable with the current scroll position. If the current scroll position is less than or equal to 0, it sets lastScrollTop to 0, indicating that the page is at the top.

    currentScroll represents the current scroll position of the page.
    this.lastScrollTop stores the last known scroll position of the page.
    Here's what happens within the if-else statement:

    If the Current Scroll Position is Greater than the Last Known Scroll Position:
This condition (currentScroll > this.lastScrollTop) checks if the current scroll position is greater than the last known scroll position.
    If this condition is true, it means that the page has scrolled down.
Therefore, this.isScrolledDown is set to true, indicating that the page is currently scrolled down.
    If the Current Scroll Position is Not Greater than the Last Known Scroll Position:
If the condition (currentScroll > this.lastScrollTop) is false, it means that the current scroll position is either equal to or less than the last known scroll position.
In this case, it implies that the page has scrolled up or remained stationary.
Therefore, this.isScrolledDown is set to false, indicating that the page is currently not scrolled down. -->



<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

