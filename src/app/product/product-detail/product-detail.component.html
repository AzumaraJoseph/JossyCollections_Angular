<div class="fluid-container detail">
    <div class="card" 
        style="background-color: rgba(245, 242, 242, 0.982);" *ngIf="product$ | async as product">
        <h3 class="card-text fs-5 p-2">Product Detail: {{product.name}}</h3>
        <div class="card-header" style="background-color: rgba(255, 255, 255, 0.993)">
            <h3 class="card-text fs-4 p-3 text-center">{{product.description}}</h3>
            <div class="card-img-top d-flex justify-content-center" >
                <img src="/assets/img/800x800_{{product.imageCover}}" class="img-fluid" alt="Product Detail Image">
            </div>
        </div>

        <div class="card-text ps-5 pt-3 pb-3" style="background-color: rgba(255, 255, 255, 0.993)">
            <div>
                <p class="fw-bold mb-1 mt-2" 
                    style="font-size: 1rem;">
                    {{product.discountedLowPrice | currency: "USD": "symbol": "1.2-2" }}

                    <ng-container *ngIf="product.discountedHighPrice !== product.discountedLowPrice">- {{product.discountedHighPrice | currency: "USD": "symbol": "1.2-2" }}</ng-container>
                </p>

                <div class="d-flex">
                    <div class="fw-semibold text-decoration-line-through me-3"  style="font-size: 1rem; flex: 0 0 1;">
                        {{product.lowPrice !== product.highPrice ? (product.lowPrice | currency: "USD": "symbol": "1.2-2"): "" }}

                        <ng-container>
                            {{product.lowPrice === product.highPrice ? "$" + (product.highPrice).toFixed(2) : " - " + ( product.highPrice | currency: "USD": "symbol": "1.2-2")}}
                        </ng-container>
                    </div>

                    <div style="color: rgba(255, 0, 0, 0.982); font-size: 0.92rem;" *ngIf="product.priceDiscountPercent && product.priceDiscountPercent > 0">{{"up to " + product.priceDiscountPercent + "% off"}}</div>
                </div>

                <p class="mt-2 mb-1" 
                [style.color]="getColors(product.quantity)" style="font-size: 0.8rem;" 
                *ngIf="product.quantity">

                {{product.quantity <= 80 ? product.quantity + " Units Left" : product.quantity <= 100 ? "Few Units Left" : product.quantity <= 150 ? "In Stock" : product.quantity <= 200 ? "In Stock" : product.quantity > 200 ? "In Stock" : ""}}
                </p>

                <!-- <p class="mt-1" style="color: rgba(255, 0, 0, 0.993); font-size: 0.8rem;" *ngIf="product.quantity && product.quantity > 50 && product.quantity <= 100">{{product.quantity && product.quantity > 50 && product.quantity <= 100 ? "In Stock" : ""}}</p> -->

                <!-- <p class="mt-1" style="color: rgba(255, 173, 21, 0.988); font-size: 0.8rem;" *ngIf="product.quantity && product.quantity > 100 && product.quantity <= 200">{{product.quantity && product.quantity > 100 && product.quantity <= 200 ? "In Stock" : ""}}
                </p> -->
                <!-- <p class="mt-1" style="color: rgba(0, 0, 0, 0.985); font-size: 0.8rem;" *ngIf="product.quantity && product.quantity > 200">{{product.quantity && product.quantity > 200 ? "In Stock" : ""}}
                </p>          -->
            </div>
            <div class="d-flex" style="align-items: center;">
                <app-star></app-star>
                <div class="ms-4">
                    {{product.ratingsQuantity && product.ratingsQuantity > 0 ? product.ratingsQuantity + " reviews" : "No reviews yet"}} 
                </div>
            </div>
        </div>

        <div class="mt-2 ps-5 pe-5 pt-2 pb-2" style="background-color: rgba(255, 255, 255, 0.993)">
            <h4 class="card-text">Colors</h4>
            <div class="col-md-12 d-flex p-0" 
            style="background-color: rgba(218, 216, 216, 0.993); height: 6.8rem;">
                <div *ngFor="let color of product.color">
                    <div class="card-img-top pt-2 ps-2">
                        <img [ngStyle]="{'border': '1px solid black'}" [src]="'/assets/img/75x75_' + color.colorImage" class="p-2" alt="Product color">
                    </div>
                </div>
            </div>
        </div>
    
        <div class="mt-2 ps-5" 
        style="background-color: rgba(255, 255, 255, 0.993); cursor: pointer;"
        *ngIf="product.specification">
            <collapsible-well>
                <div well-title>
                    <h4 class="mb-0">Specification</h4>
                </div>
                <div well-body>
                    <h4 class="text-center pt-4 pb-4">Product Specification</h4>
                    <table class="table table-responsive">
                        <tbody>
                            <tr>
                                <th scope="row">1</th>
                                <td>Model</td>
                                <td>{{product.specification.model}}</td>
                            </tr>
                            <tr>
                                <th scope="row">2</th>
                                <td>Material</td>
                                <td>{{product.specification.material}}</td>
                            </tr>
                            <tr>
                                <th scope="row">3</th>
                                <td>Shipping</td>
                                <td>{{product.specification.shipping}}</td>
                            </tr>
                            <tr>
                                <th scope="row">4</th>
                                <td>Tags</td>
                                <td>{{product.tag}}</td>
                            </tr>
                        </tbody>
        
                    </table>
                </div>
            </collapsible-well>
        </div>

        <!-- <div class="modal">
            <div class="modal-dialog">
                Reviews
                <div class="col-md-12 mt-3">
                    <div class="content">
                        <div class="d-flex justify-content-between fw-bold">
                            <span>Azumara Joseph</span>
                            <span>14th May, 2024</span>
                        </div>
                        <app-star></app-star>
                        <p class="mb-0">I likey</p>
                    </div>
                    <div class="content">
                        <div class="d-flex justify-content-between fw-bold">
                            <span>Stephen Azumara</span>
                            <span>19th May, 2024</span>
                        </div>
                        <app-star></app-star>
                        <p class="mb-0">I likey</p>
                    </div>
                    <div class="content">
                        <div class="d-flex justify-content-between fw-bold">
                            <span>Azumara Favor</span>
                            <span>7th January, 2024</span>
                        </div>
                        <app-star></app-star>
                        <p class="mb-0">I likey</p>
                    </div>
                </div>
            </div>

        </div> -->


        <!-- <div class="modal" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Modal title</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>Modal body text goes here.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Save changes</button>
                </div>
              </div>
            </div>
          </div> -->

          <!-- Button trigger modal -->
        <div class="mt-2 ps-5 pe-5"
        style="background-color: rgba(255, 255, 255, 0.993); cursor: pointer;"
        data-bs-toggle="modal"
        data-bs-target="#exampleModal">
            <div class="pt-2 pb-2">
                <h4>Reviews</h4>
            </div>

            <div class="content-body">
                <div class="d-flex justify-content-between fw-bold">
                    <span>Azumara Joseph</span>
                    <span>14th May, 2024</span>
                </div>
                <app-star></app-star>
                <p class="mb-0">I likey</p>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Reviews</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body p-2">
                        <div  style="background-color: blue; border-radius: 0.6rem; padding: 0.5rem;" 
                        *ngIf="product$ | async as product">
                    
                            <div class="col-md-12 d-flex  flex-column">
                                <div class="mt-3 mb-2 rating">
                                    <p class="fs-3 fw-bold mb-2" 
                                    style="color: rgba(233, 172, 16, 0.978);">{{product.ratingsAverage + '/5' }}</p>
                                    <p class="mb-0">{{product.ratingsQuantity + ' verified ratings' }}</p>
                                </div>
                        
                                <div class="col-md-12" style="border-bottom: 1px solid black; width: 100%;" *ngIf="product">
                                                        
                                    <div class="col-md-12 rating-bar">
                                        <p class="col-md-1 mb-0">1</p>
                                        <p class="col-md-1 star">&#9733;</p>
                                        <div class="progress w-100" style="height: 0.8rem;">
                                            <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                                        </div>
                                        <p class="col-md-1 mb-0" style="margin-left: 10px;">3</p>
                                    </div>
                                    <div class="col-md-12 rating-bar">
                                        <p class="col-md-1 mb-0">1</p>
                                        <p class="col-md-1 star">&#9733;</p>
                                        <div class="progress w-100" style="height: 0.8rem;">
                                            <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                                        </div>
                                        <p class="col-md-1 mb-0" style="margin-left: 10px;">3</p>
                                    </div>
                                    <div class="col-md-12 rating-bar mb-3">
                                        <p class="col-md-1 mb-0">3</p>
                                        <p class="col-md-1 star">&#9733;</p>
                                        <div class="progress w-100" style="height: 0.8rem;">
                                            <div class="progress-bar w-75" style="background-color: rgba(233, 172, 16, 0.978); height: 100%;"></div>
                                        </div>
                                        <p class="col-md-1 mb-0" style="margin-left: 10px;">7</p>
                                    </div>                     
                                </div>
                    
                                <div class="col-md-12 mt-3">
                                    <div class="content">
                                        <div class="content-body">
                                            <div class="d-flex justify-content-between fw-bold">
                                                <span>Azumara Joseph</span>
                                                <span>14th May, 2024</span>
                                            </div>
                                            <app-star></app-star>
                                            <p class="mb-0">I likey</p>
                                        </div>
                                        <div class="content-body">
                                            <div class="d-flex justify-content-between fw-bold">
                                                <span>Stephen Azumara</span>
                                                <span>19th May, 2024</span>
                                            </div>
                                            <app-star></app-star>
                                            <p class="mb-0">I likey</p>
                                        </div>
                                        <div class="content-body">
                                            <div class="d-flex justify-content-between fw-bold">
                                                <span>Azumara Favor</span>
                                                <span>7th January, 2024</span>
                                            </div>
                                            <app-star></app-star>
                                            <p class="mb-0">I likey</p>
                                        </div>
                                    </div>
                                </div>                    
                            </div>  
                        </div>
                    </div>
                    <!-- <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div> -->
                </div>
            </div>
        </div>

        <!-- <div class="table-responsive mt-2" style="background-color: rgba(255, 255, 255, 0.993)">
            <h4 class="text-center">Product Specification</h4>
            <table class="table table-responsive">
                <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>Loea! Consectetur vero ipsam iste.
                        </td>
                        <td>Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta 
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Loea! Consectetur vero ipsam iste.
                        </td>
                        <td>Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta 
                        </td>
                    </tr>
                </tbody>

            </table>
        </div> -->
    </div>
</div>

<!--[ngStyle]="{'border': '1px solid black'}" src="/assets/img/75x75_product_66261fabd1ec1eb174f2bab4-1713777812246-black.jpeg" class="p-2" alt="Product color" 
 <img src="/assets/img/75x75_{{image}}" class="card-img-top p-0" alt="Products Image">
-->
<div class="alert alert-danger" *ngIf="errorMessage$ | async as errorMessage">
    {{errorMessage}}
</div>



