<div class="fluid-container" style="margin-top: 6rem;">
    <div class="header">
        <span class="material-icons">
            star
        </span>
    </div>

    <div style="margin: 0 auto; width: 39%;">
        <div class="center">
            <h5 class="fw-bold fs-4">Create your Acount</h5>
            <p style="color: rgba(84, 83, 83, 0.978); font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif; margin-bottom: 0;">Let's get started by creating your account. <br>
            To keep your account safe, we need a strong password</p>
        </div>
        <div>
        <form novalidate autocomplete="off" [formGroup]="signUpForm" (ngSubmit)="save()" >
                <div class="form-floating form-group mb-3">
                    <input type="text"
                        class="form-control"
                        id="firstNameId"
                        formControlName="firstName"
                        placeholder=" Enter Your First Name" 
                        [ngClass]="{'is-invalid': (signUpForm.controls['firstName'].touched || signUpForm.get('firstName')?.dirty) && !signUpForm.get('firstName')?.valid }" >

                    <label for="firstNameId">First Name</label>

                    <div *ngIf="(signUpForm.controls['firstName'].touched || signUpForm.controls['firstName'].dirty)  && !signUpForm.controls['firstName'].valid">
                        <span class="invalid-feedback" *ngIf="signUpForm.controls['firstName'].errors?.['required']">
                          <em>Please enter your first name</em>
                        </span>
                        <span class="invalid-feedback" *ngIf="signUpForm.controls['firstName'].errors?.['minlength']">
                            First name must be more than 3 characters
                        </span>
                    </div>
                </div>

                <div class="form-floating form-group mb-3">
                  <input type="text"
                      class="form-control"
                      id="lastNameId"
                      formControlName="lastName"
                      placeholder=" Enter Your Last Name" 
                      [ngClass]="{'is-invalid': (signUpForm.controls['lastName'].touched || signUpForm.get('lastName')?.dirty) && !signUpForm.get('lastName')?.valid }" >

                  <label for="lastNameId">Last Name</label>

                  <div *ngIf="(signUpForm.controls['lastName'].touched || signUpForm.controls['lastName'].dirty)  && !signUpForm.controls['lastName'].valid">
                      <span class="invalid-feedback" *ngIf="signUpForm.controls['lastName'].errors?.['required']">
                        <em>Please enter your last name</em>
                      </span>
                      <span class="invalid-feedback" *ngIf="signUpForm.controls['lastName'].errors?.['maxlength']">
                          Last name must not exceed 10 characters
                      </span>
                  </div>
              </div>

                <div class="form-floating form-group mb-3">
                    <input type="email"
                        class="form-control" 
                        id="emailId"
                        formControlName="email"
                        placeholder=" Enter Your Email" 
                        [ngClass]="{'is-invalid': (signUpForm.controls['email'].touched || signUpForm.get('email')?.dirty) && !signUpForm.get('email')?.valid }" >

                    <label for="emailId">Email</label>
                    

                    <div *ngIf="(signUpForm.controls['email'].touched || signUpForm.controls['email'].dirty)  && !signUpForm.controls['email'].valid">
                        <span class="invalid-feedback" *ngIf="signUpForm.controls['email'].errors?.['required']">
                            <em>Please enter your email</em>
                        </span>
                        <span class="invalid-feedback" *ngIf="signUpForm.controls['email'].errors?.['email']">
                            Please enter a valid email address
                        </span>
                    </div>
                </div>

                    <div class="form-floating form-group mb-3">
                      <input type="password"
                        class="form-control"
                        id="passwordId"
                        formControlName="password"
                        placeholder=" Enter Your Password"
                        [ngClass]="{'is-invalid': (signUpForm.get('password')?.touched || signUpForm.get('password')?.dirty) && !signUpForm.get('password')?.valid }">
                      <label for="passwordId">Password</label>
                      <div *ngIf="(signUpForm.get('password')?.touched || signUpForm.get('password')?.dirty) && !signUpForm.get('password')?.valid">
                        <span class="invalid-feedback" *ngIf="signUpForm.get('password')?.errors?.['required']">
                          <em>Please enter your password</em>
                        </span>
                        <span class="invalid-feedback" *ngIf="signUpForm.get('password')?.errors?.['minlength']">
                          Password must be more than 8 characters
                        </span>
                      </div>
                    </div>
                
                    <div class="form-floating form-group mb-3">
                      <input type="password"
                        class="form-control"
                        id="confirmPasswordId"
                        formControlName="confirmPassword"
                        placeholder=" Enter Your Confirm Password"
                        [ngClass]="{'is-invalid': (signUpForm.get('confirmPassword')?.touched || signUpForm.get('confirmPassword')?.dirty) && (!signUpForm.get('confirmPassword')?.valid || signUpForm.hasError('passwordsMismatch')) }">
                      <label for="confirmPasswordId">Confirm Password</label>

                      <!-- <div *ngIf="(signUpForm.get('confirmPassword')?.touched || signUpForm.get('confirmPassword')?.dirty) && !signUpForm.get('confirmPassword')?.valid">
                        <!-- <span class="invalid-feedback" *ngIf="signUpForm.get('confirmPassword')?.errors?.['required']">
                          <em>Please confirm password</em>
                        </span> -->
                        <!-- <span *ngIf="signUpForm.controls?.['errors'] && signUpForm.hasError('passwordsMismatch')">
                            <small>Passwords do not match.</small>
                          </span> --
                          <span class="invalid-feedback" *ngIf="signUpForm.hasError('passwordsMismatch') ">
                            <em>Passwords do not match.</em>
                          </span>
                      </div> -->
                      <div class="invalid-feedback" *ngIf="signUpForm.hasError('passwordsMismatch') && signUpForm.controls['confirmPassword'].touched">
                          <em>Password does not match.</em>
                      </div>
                    </div>
                  

                <div class="form-floating form-group mb-2">
                    <input type="number" 
                            class="form-control" 
                            id="phoneId" 
                            formControlName="phone" 
                            placeholder=" Enter Your Phone" 
                            [ngClass]="{'is-invalid': (signUpForm.controls['phone'].touched || signUpForm.get('phone')?.dirty) && !signUpForm.get('phone')?.valid }" >
                    <label for="phoneId">Phone</label>

                    <div *ngIf="(signUpForm.controls['phone'].touched || signUpForm.controls['phone'].dirty)  && !signUpForm.controls['phone'].valid">
                        <span class="invalid-feedback" *ngIf="signUpForm.controls['phone'].errors?.['required']">
                            <em>Please enter your phone</em>
                        </span>
                    </div>
                    
                </div>

                <div *ngIf="errorMessage$ | async as errorMessage" style="color: red;" >{{ errorMessage }}</div>

                <div class="button">
                    <button class="btn fw-bold w-100 p-2" type="submit" [disabled]="!signUpForm.valid" style="color: white; font-size: 1rem; border: none;">Continue</button>
                </div>
            </form> 

            <!-- <form [formGroup]="userForm">
              <div>
                <label for="name">Name:</label>
                <input id="name" formControlName="name" type="text">
                <div *ngIf="userForm.controls['name'].touched && userForm.controls['name'].invalid">
                  <small *ngIf="userForm.controls['name'].errors?.['required']">Name is required.</small>
                </div>
              </div>
              <div>
                <label for="email">Email:</label>
                <input id="email" formControlName="email" type="email">
                <div *ngIf="userForm.controls['email'].touched && userForm.controls['email'].invalid">
                  <small *ngIf="userForm.controls['email'].errors?.['required']">Email is required.</small>
                  <small *ngIf="userForm.controls['email'].errors?.['email']">Invalid email format.</small>
                </div>
              </div>
              <div>
                <label for="phone">Phone:</label>
                <input id="phone" formControlName="phone" type="text">
                <div *ngIf="userForm.controls['phone'].touched && userForm.controls['phone'].invalid">
                  <small *ngIf="userForm.controls['phone'].errors?.['required']">Phone is required.</small>
                </div>
              </div>
              <div>
                <label for="password">Password:</label>
                <input id="password" formControlName="password" type="password">
                <div *ngIf="userForm.controls['password'].touched && userForm.controls['password'].invalid">
                  <small *ngIf="userForm.controls['password'].errors?.['required']">Password is required.</small>
                  <small *ngIf="userForm.controls['password'].errors?.['minlength']">Password must be at least 6 characters.</small>
                </div>
              </div>
              <div>
                <label for="confirmPassword">Confirm Password:</label>
                <input id="confirmPassword" formControlName="confirmPassword" type="password">
                <div *ngIf="userForm.hasError('passwordsMismatch') && userForm.controls['confirmPassword'].touched">
                  <small>Passwords do not match.</small>
                </div>
              </div>
              <button type="submit" [disabled]="userForm.invalid">Submit</button>
            </form> -->
            


            <p class="text-center mt-3 mb-3" style="font-size: 0.8rem; font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">By continuing you agree to Jossy's <br> <a href="">Terms and Conditions</a></p>

            <p class="text-center mt-2" style="font-size: 0.93rem; font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">For further support, you may visit the Help Center or contact our customer service team.</p>
                
            <div class="header d-flex align-items-center">
                <h5 class="mb-0 fw-bold me-1">JOSSY</h5>
                <span class="material-icons icon">star</span>
            </div>
            <p class="text-center" style="font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;">Already have an account? <a [routerLink]="['/user/login']" routerLinkActive="router-link-active" >Log in</a></p>
            
        </div>
    </div>
</div>